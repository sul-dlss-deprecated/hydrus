------------------
Current
------------------

HYDRUS-54. Implement restrictions governing what a user is allowed to change in
subsequent versions.

  - License can change, but it forces the version to be treated as major.
  - Visibility (world|stanford) may not be reduced.
  - Embargo date can be removed, reduced, or even increased, but it cannot be
    increased to beyond the date of P + D, where P is date of initial
    publication, and D is the max delta (eg, 2 years) set at the collection
    level.

HYDRUS-58. Use and reproduction: add the required Stanford statement. Requires
refactoring of license setter, which is too aggressive to deleting nodes.

  BLAH BLAH = User agrees that, where applicable, content will not be used to
  identify or to otherwise infringe the privacy or confidentiality rights of
  individuals. Content distributed via the Stanford Digital Repository may be
  subject to additional license and use restrictions applied by the depositor.

  Add to rightsMetadata of Collections and Items:
    
    <use><human type="useAndReproduction">BLAH BLAH</human></use>

  Collection edit page:
    Change section title to "Terms of Use and Licenses".
    Above the license selections, add this text:

      The following Terms of Use will be displayed with each item published in
      this collection: "BLAH BLAH".

  Collection view page:
    Ditto.

  Item Edit page:
    Change section title.
    Add this text:

      The following Terms of Use will be displayed with this item when published:
      "BLAH BLAH".

  Item view page:
    Change section title: "Release, Visibility, License, and Terms of Use".
    Add "Terms of use" item, with the text: "BLAH BLAH".

------------------
On-deck
------------------

Fortune Cookie: (a) nuke!(). (b) Shorten robot sleep time.

HYDRUS-61 and HYDRUS-60. Object cleanup and remediation in deployed
environments. Prod: remediate Collection md919gh6774 and its APO and Items (but
delete its stray Item kr880mc3948), and nuke the rest. Test: nuke everything.
See delete() in generic_object.rb, along with cleanup_object() in
Assembly::Utils. What's required to nuke an object? In general: Fedora,
dor-Solr, workflow DB, /dor/assembly files or symlink, /dor/workspace files or
symlink, stacks, and SDR. Hydrus: hydrus-Solr, hydrus-uploads-dir, hydrus-DB.

Remediate the ur-APO and run in through pipeline, including SDR: druid:zw306xn5593.
The current object lacks workflows datastream.

HYDRUS-51. Add support for "corporate" and "conference" Contributor name types.
[See ticket for details.]

Hydrus has recursive symlinking in its uploads directory. For example: see
uploads/nw/312/yv/4331/nw312yv4331. Appears to occur for items with subsequent
versions. Check path_to_object() in findable.rb in assembly for possible bugs.

HYDRUS-49. XML changes. [Hannah will supply needed changes.]

HYDRUS-55. Build the background versioner.

HYDRU-56. Refine the "published on" date.

HYDRUS-10. Support user's ability to hide specific files, which has the effect
of setting publish and shelve to false in the content metadata. Offer a "Hide"
checkbox (default unchecked) next to each uploaded file. Also include an info
icon with some help text.

HYDRUS-67: Add instructional text for Citations section in Item Edit view.

Remove Dor::Processable from APOs after Jon include the concern at the dor-services
level [Expected soon.]

Before we can go to production: must deploy common-accessioning with the
lastest dor-services.

Move definition of administrators and collection_creators to config files, and
allow them to vary by environment.

File a SAR ticket to bump up the power of hydrus-test.

Use and reproduction customization. (1) Collection edit. Show Stanford
default. Offer textbox for additional text. Then offer radio button where
collection manager decides whether Item depositor can edit that additional
text. (2) Item edit. Provide text box. If the collection manager wrote
additional text, the Item text box will be pre-populated with that text (if the
manager said the Item depositor could edit) or with nothing. (3) Join the three
pieces of text (Stanford, Collection, Item) with two line breaks.

--------
Other: blocked, requires discussion, uncertain need, etc.
--------

Migrate functionality from Hydrus to dor-services gem.

Modify purl_page_ready() to indicate if the page is for the prior version -- in
effect, "ready but stale".

The <access> blocks in rightsMetadata should include <none/> to indicate no
access. This is sort of a pain: how important is it?

Dashboard: implement hyperlinks to items-by-status. For example, "3 published"
should be a hyperlink to the 3 published items for the applicable collection.

Embargo, visibility, and license for draft Items under scenarios when the
collection's policies are changed from varies to fixed. Current app behavior:
if the collection allows "varies", the edit UI offers widgets; otherwise, the
Item view/edit pages display the current value for the Item. The problem
scenario: if Collection changes from varies to fixed, its unpublished items
will be "stuck" at their current value -- which might or might not agree with
the new fixed value set by the collection manager.

Move Terms of Deposit acceptance pop-up so it shows (if needed) when an item is
created.

Collection Items page: Type column is temporarily commented out. Add back when
we distinguish between different item types.

Workflow service for local development: get workflow service running locally
rather than using the service on sul-lyberservices-dev.

Search results page: design could use some improvement. In addition, the
page does not provide a link back to the home page.

Assess allowing collections to be opened without being published. In effect,
this would be an open, draft Collection.

Should submit_for_approval() and resubmit() send email messages?

Should the hydrus app be logging more systematically?

Implement the ability for an admin to impersonate another user.

Gryphondor for Hydrus, so that Hydrus objects appear in SearchWorks.
[Gryphondor might be ready to add Hydrus as a project in February.]

Create object mc322hh4254 (hydra:referencesAgreement) on hydrus-dev,
hydrus-test, and hydrus-prod. [Hannah/Lynn]

Collection create: APO.roleMetadata: set the value of <name> for the
collection-manager. [Waiting on LDAP].

Update SUL-chrome gem to latest Bootstrap (needed to be able to use the
unchecked checkbox icon, which is not available in our current SUL-chrome gem).
When this is done, change "icon-minus" to "icon-check-empty" in the
select_status_checkbox_icon helper method (application_helper.rb).

Upgrade to hydra-head 5.0, active-fedora 5.2, OM 1.8, Solrizer 2.0, and
Blacklight 4.0. See github.com/projecthydra/hydra-head/wiki/Migrating-to-5.0.

When we upgrade to Nokogiri 1.5.6 we might encounter some namespace gotchas
when trying to access attributes. [See email from Jon Deering.]

Update Rubydora and incorporate rollback_fixtures() into it. See
spec_helper.rb. [We are blocked by active-fedora gem restriction to to 0.5.x
series. When we ugrade active-fedora, that restriction will disappear.]

Deprecation warning: "Hydra::FileAssetsHelper has been moved". We will need to
deal with this before we move to hydra-head v5x.

The home page is producing explosive volumes of SOLR logging. This occurs
during the super() call in index() of catalog_controller.rb, which invokes a
Blacklight method that logs the entire SOLR response. A bug has been filed; in
the meantime, you can use the `rake server` task, which filters out most of the
noise. [Might be fixed when we upgrade to newer version of the hydra stack.]

XML formatting issues: (1) MODS elements should be in the default order of the
MODS spec. (2) Save the XML in some consistent pretty-print form. (3) No
useless empty elements. We attempted to make some improvement to descMetadata
using the beautify_datastream() and add_hydrus_next_sibling_node() methods;
however, the former method led to some strange behavior (for example, note the
failure of `rails runner devel/create_test_item.rb batch co i`). Further
progress probably requires some planning/discussion. The existing hydra-OM
stack does not make it easy to address all of the concerns, and several DLSS
developers expressed skepticism about the wisdom of the endeavor. If this is
truly a requirement, we should to decide the most practical place to implement
such behavior -- in every application or in a single XML-cleanup gem that all
applications could invoke.

Consider moving the actual collection-depositor roleMD info from the APO to the
Collection, for two reasons: (1) it parallels the roleMD stored in the Item;
(2) without it, we don't have access to the collection depositor during search
results (at least not without mucking with the to_solr method, which we have
done in the roleMD class).

Hydrus needs to skip a step in assemblyWF. Currently we achieve this by
bypassing the reified workflow system and pushing custom XML directly into the
WF service (see start_common_assembly). A better approach would be to have
dor-services and workflow service accept an options hash allowing the caller to
request that particular steps in the workflow be marked as skipped.

Consider adding version_significance() to dor-services gem.

Because it's simpler to run all Hydrus objects through the same pipeline
(assembly then accessioning), because assembly requires the existence of
contentMetadata, and because the accessioning robots will ultimately add a
contentMetadata datastream to all objects, Hydrus Collections and APOs have the
contentMetadata datastream, which might not be officially correct (though it
doesn't really hurt anything). If we care, we need to change assembly,
accesioning, and the Hydrus code that adds the contentMetadata datastream to
Collections and APOs.
